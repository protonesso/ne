#!/bin/bash
#

pushd() { command pushd "$@" > /dev/null; }
popd() { command popd "$@" > /dev/null; }
msg() { printf '[\033[32m INFO\033[m ] %s\n' "$@"; }
warn() {
	printf '[\033[33m WARN\033[m ] %s\n' "$@"
	rm -rf /tmp/2update
}
die() {
	printf '[\033[31m FAIL\033[m ] %s\n' "$@"

	if [ "$CLEAN" != "no" ]; then
		rm -rf "$WORK"
	fi

	rm -rf /tmp/2update

	exit 1
}

check_root() {
	if [[ $EUID -ne 0 ]]; then
		die "You must be root to run 'ne'"
	fi
}

is_installed() {
	local pkg="$1"

	if [ -n "$ROOTDIR" ]; then
		ROOTFLAGS="--root=$ROOTDIR"
	fi

	if [ -n "$(dpkg $ROOTFLAGS -s "$pkg" | grep -oh 'install ok installed')" ]; then
		echo "yes"
	fi
}

find_portdir() {
	local pkg="$1"

	for myrepos in ${REPOS[@]}; do
		if [ -d "$myrepos/$pkg" ]; then
			echo "$myrepos/$pkg"
			break
		fi
	done
}

find_portver() {
	local pkg="$1"
	local portdir="$(find_portdir $pkg)"
	local MYPORT version_private release_private

	if [ -f "$portdir/KagamiBuild" ]; then
		MYPORT="$portdir/KagamiBuild"
	elif [ -f "$portdir/KBUILD" ]; then
		MYPORT="$portdir/KBUILD"
	elif [ -f "$portdir/Pkgfile" ]; then
		MYPORT="Tportdir/Pkgfile"
	else
		die "Failed to source the package recipe"
	fi

	version_private="$(grep ^version $MYPORT | sed -e 's/version=//g')"
	release_private="$(grep ^release $MYPORT | sed -e 's/release=//g')"

	echo "${version_private}-${release_private}"
}

find_instver() {
	if [ -n "$ROOTDIR" ]; then
		ROOTFLAGS="--root=$ROOTDIR"
	fi

	local pkg="$1"
	local version_private="$(dpkg $ROOTFLAGS -s $pkg | grep 'Version:' | awk '{print $2}')"

	echo "$version_private"
}

source_config() {
	if [ -f "$CONFIG" ]; then
		source "$CONFIG"
	else
		die "Failed to source the configuration file"
	fi

	if [ -z "$BARCH" ]; then
		die "Specify CPU architecture"
	fi
}

source_recipe() {
	unset name version release options backup source noextract
	unset -f build

	if [ -f "$TOPDIR/KagamiBuild" ]; then
		MYPORT="$TOPDIR/KagamiBuild"
	elif [ -f "$TOPDIR/KBUILD" ]; then
		MYPORT="$TOPDIR/KBUILD"
	elif [ -f "$TOPDIR/Pkgfile" ]; then
		MYPORT="$TOPDIR/Pkgfile"
	else
		die "Failed to source the package recipe"
	fi

	source "$MYPORT"

	depends="$(grep "^# Depends on[[:blank:]]*:" "$MYPORT" | sed 's/^# Depends on[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++' | sed -e 's/ /, /g')"
	xdepends="$(grep "^# Depends on[[:blank:]]*:" "$MYPORT" | sed 's/^# Depends on[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++')"
	conflicts="$(grep "^# Conflicts with[[:blank:]]*:" "$MYPORT" | sed 's/^# Conflicts with[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++' | sed -e 's/ /, /g')"
	xconflicts="$(grep "^# Conflicts with[[:blank:]]*:" "$MYPORT" | sed 's/^# Conflicts with[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++')"
	provides="$(grep "^# Provides[[:blank:]]*:" "$MYPORT" | sed 's/^# Provides[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++' | sed -e 's/ /, /g')"
	replaces="$(grep "^# Replaces[[:blank:]]*:" "$MYPORT" | sed 's/^# Replaces[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++' | sed -e 's/ /, /g')"
	summary="$(grep "^# Description[[:blank:]]*:" "$MYPORT" | sed 's/^# Description[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++')"
	section="$(grep "^# Section[[:blank:]]*:" "$MYPORT" | sed 's/^# Section[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++' | sed -e 's/ /, /g')"
	priority="$(grep "^# Priority[[:blank:]]*:" "$MYPORT" | sed 's/^# Priority[[:blank:]]*:[[:blank:]]*//' | tr ' ' ' ' | awk '!a[$0]++' | sed -e 's/ /, /g')"
	maintainer="suzu <root@localhost>"

	if [ "$USEBOOTSTRAP" = "yes" ]; then
		if [ -z "$section" ]; then
			section="misc"
		fi
		if [ -z "$maintainer" ]; then
			maintainer="suzu <root@localhost>"
		fi
	fi

	if [ -z "$name" ]; then
		die "The name of package is not set"
	elif [ -z "$version" ]; then
		die "The version of package is not set"
	elif [ -z "$release" ]; then
		die "The release of package is not set"
	elif [ -z "$maintainer" ]; then
		die "The maintainer of package is not set"
	elif [ -z "$section" ]; then
		die "The section of package is not set"
	fi
}

get_filename() {
	local ABSOLUTE=""
	if [ "$1" = "-a" ]; then
		ABSOLUTE=1
		shift
	fi

	if [[ $1 =~ ^(http|https|ftp|file)://.*/(.+) ]]; then
		echo "$SRCDEST/${BASH_REMATCH[2]}"
	else
		if [ "$ABSOLUTE" ]; then
			echo $TOPDIR/$1
		else
			echo $1
		fi
	fi
}

run_strip() {
	local fs="$1"

	find "$fs/" -type f 2>/dev/null | while read -r binary ; do
		case "$(file -bi $binary)" in
			*application/x-sharedlib*)
				${CROSS_COMPILE}strip --strip-unneeded "$binary" ;;
			*application/x-pie-executable*)
				${CROSS_COMPILE}strip --strip-unneeded "$binary" ;;
			*application/x-archive*)
				${CROSS_COMPILE}strip --strip-debug "$binary" ;;
			*application/x-executable*)
				${CROSS_COMPILE}strip --strip-all "$binary" ;;
			*)
				continue ;;
		esac
	done
}

parse_options() {
	for myopts in ${OPTIONS[@]} ${options[@]}; do
		case $myopts in
			emptydirs)
				OPT_EMPTYDIRS=1
				;;
			~emptydirs)
				OPT_EMPTYDIRS=0
				;;
			strip)
				OPT_STRIP=1
				;;
			~strip)
				OPT_STRIP=0
				;;
			makeflags)
				OPT_MAKEFLAGS=1
				;;
			~makeflags)
				OPT_MAKEFLAGS=0
				;;
			locales)
				OPT_LOCALES=1
				;;
			~locales)
				OPT_LOCALES=0
				;;
			docs)
				OPT_DOCS=1
				;;
			~docs)
				OPT_DOCS=0
				;;
			~bootstrap)
				OPT_BOOTSTRAP=0
				;;
			bootstrap)
				OPT_BOOTSTRAP=1
				;;
			~ccache)
				OPT_CCACHE=0
				;;
			ccache)
				OPT_CCACHE=1
				;;
		esac
	done
}

download_file() {
	local url="$1"

	if [ ! "`type -p curl`" ]; then
		die "curl wasn't found"
	fi

	msg "Downloading $url"

	LOCAL_FILENAME=`get_filename $url`
	LOCAL_FILENAME_PARTIAL="$LOCAL_FILENAME.partial"
	cmd="-f --retry 3 --retry-delay 3 -L -o $LOCAL_FILENAME_PARTIAL $CURLOPTS"
	resumecmd="-C -"
	fullcmd="curl $cmd"
	RESUME="no"

	if [ -f "$LOCAL_FILENAME_PARTIAL" ]; then
		warn "Partial download found, trying to resume"
		RESUME="yes"
		fullcmd="$fullcmd $resumecmd"
	fi

	error=1

	if [ $error != 0 ]; then
		while true; do
			$fullcmd $1
			error=$?
			if [ $error != 0 ] && [ "$RESUME" = "yes" ]; then
				warn "Partial download failed, restarting"
				rm -f "$LOCAL_FILENAME_PARTIAL"
				RESUME="yes"
			else
				break
			fi
		done
	fi

	if [ $error != 0 -o ! -f "$LOCAL_FILENAME_PARTIAL" ]; then
		die "Downloading '${1}' failed."
	fi

	mv -f "$LOCAL_FILENAME_PARTIAL" "$LOCAL_FILENAME"
}

download_source() {
	local FILE LOCAL_FILENAME

	if [ -n "$source" ]; then
		for FILE in ${source[@]}; do
			LOCAL_FILENAME=`get_filename $FILE`
			if [ ! -e $LOCAL_FILENAME ]; then
				if [ "$LOCAL_FILENAME" = "$FILE" ]; then
					die "Source file '$LOCAL_FILENAME' not found (can not be downloaded, URL not specified)."
				else
					download_file $FILE
				fi
			fi
		done
	fi
}

unpack_source() {
	if [ "${#source[@]}" -gt 0 ]; then
		for FILE in ${source[@]}; do
			FILENAME="$(basename $FILE)"
			LOCAL_FILENAME=`get_filename $FILE`

			for NOEXT in ${noextract[@]}; do
				if [ "$NOEXT" = "$FILENAME" ]; then
					nxt=1
					break
				fi
			done

			if [ "$FILENAME" != "$FILE" ] && [ "$nxt" != 1 ]; then
				case $LOCAL_FILENAME in
					*.tar|*.tar.gz|*.tar.Z|*.tgz|*.tar.bz2|*.tbz2|*.tar.xz|*.txz|*.tar.lzma|*.tar.lz|*.tlz|*.tar.lz4|*.tar.zst|*.tar.zstd|*.zip|*.rpm|*.7z)
						msg "Extacting $FILENAME to the sources directory"
						bsdtar -p -o -C "$SRC" -xf $LOCAL_FILENAME || die "Failed to extract $FILENAME to the sources directory"
						;;
					*)
						msg "Copying $FILENAME to the sources directory"
						cp $LOCAL_FILENAME "$SRC" || die "Failed to copy $FILENAME to the sources directory"
						;;
				esac
			else
				msg "Copying $FILENAME to the sources directory"
				cp $LOCAL_FILENAME "$SRC" || die "Failed to copy $FILENAME to the sources directory"
			fi
			nxt=
		done
	fi
}

setup_compiler() {
	if [ -n "$CC" ]; then
		MYCC="$CC"
	else
		MYCC="gcc"
	fi
	if [ -n "$CXX" ]; then
		MYCXX="$CXX"
	else
		MYCXX="g++"
	fi
}

compile_package() {
	local MYCC MYCXX
	local HAS_SUCCESS="no"

	if [ "$OPT_MAKEFLAGS" != "0" ]; then
		export MAKEFLAGS="$MKOPTS"
		export NINJA_OPTIONS="$MKOPTS"
	else
		unset MAKEFLAGS NINJA_OPTIONS MKOPTS
	fi

	if [ "$USE_BOOTSTRAP" != "yes" ]; then
		if [ "$OPT_CCACHE" != "0" ]; then
			if type ccache > /dev/null 2>&1; then
				if [ -n "$CC" ]; then
					MYCC="ccache $CC"
				else
					MYCC="ccache gcc"
				fi
				if [ -n "$CXX" ]; then
					MYCXX="ccache $CXX"
				else
					MYCXX="ccache g++"
				fi
			else
				setup_compiler
			fi
		else
			setup_compiler
		fi
	fi

	if type build > /dev/null 2>&1; then
		msg "Compiling package"
		pushd "$SRC"
			(
				set -e
				export CC="$MYCC"
				export CXX="$MYCXX"
				build
			)
			if [ $? = 0 ]; then
				HAS_SUCCESS="yes"
			fi

			if [ "$HAS_SUCCESS" != "yes" ]; then
				die "Failed to compile package: $name"
			fi
		popd
	fi

	pushd "$PKG"
		msg "Removing junk from package"
		rm -rf {,usr/}{,local/}{,share/}info usr{,/local}{,/share},opt/*}/info
		rm -rf {,usr/}{,local/}lib/charset.alias

		find . -name "*.la" -print0 | xargs -0 rm -rf
		find . -name "*.pod" -print0 | xargs -0 rm -rf
		find . -name ".packlist" -print0 | xargs -0 rm -rf

		if [ "$OPT_EMPTYDIRS" = "0" ]; then
				msg "Removing empty directories"
		find . -type d -empty -print0 | xargs -0 rm -rf
		fi

		if [ "$OPT_LOCALES" = "0" ]; then
			msg "Removing locales"

			for a in ru hu lt ja; do
				if [ -d "$WORK/pkg/usr/share/locale/$a" ]; then
					mv "$WORK"/pkg/usr/share/locale/$a "$WORK"/$a
				fi
			done

			rm -rf {,usr/}{,local/}{,share/}locale

			mkdir -p usr/share/locale/
			for a in ru hu lt ja; do
				if [ -d "$WORK/$a" ]; then
					mv "$WORK"/$a "$WORK"/pkg/usr/share/locale/$a
				fi
			done
		fi

		if [ "$OPT_DOCS" = "0" ]; then
			msg "Removing documentation"
			rm -rf {,usr/}{,local/}{,share/}doc usr/{,local/}{,share/}{doc,gtk-doc} opt/*/{doc,gtk-doc}
		fi

		msg "Compressing manual pages"
		find . -type f -path "*/man/man*/*" | while read FILE; do
			if [ "$FILE" = "${FILE%%.gz}" ]; then
				pigz -9 "$FILE"
			fi
		done

		find . -type l -path "*/man/man*/*" | while read FILE; do
			TARGET=`readlink -n "$FILE"`
			TARGET="${TARGET##*/}"
			TARGET="${TARGET%%.gz}.gz"
			rm -f "$FILE"
			FILE="${FILE%%.gz}.gz"
			DIR=`dirname "$FILE"`

			if [ -e "$DIR/$TARGET" ]; then
				ln -sf "$TARGET" "$FILE"
			fi
		done

		if [ "$OPT_STRIP" != "0" ]; then
			msg "Removing debug information from binary files"
			run_strip "$PKG"
		fi
	popd
}

create_package() {
	local HAS_SUCCESS="no"

	pushd "$WORK"
		pushd "$PKG"
			msg "Compressing package data"
			tar zcf "$WORK"/data.tar.gz .
		popd

		msg "Generating package metadata"
		mkdir -p DEBIAN
		echo "Package: $name" >> DEBIAN/control
		echo "Version: ${version}-${release}" >> DEBIAN/control
		echo "Architecture: musl-linux-$BARCH" >> DEBIAN/control
		echo "Maintainer: $maintainer" >> DEBIAN/control
		echo "Section: $section" >> DEBIAN/control

		if [ -n "$summary" ]; then
			echo "Description: $summary" >> DEBIAN/control
		fi
		if [ -n "$priority" ]; then
			echo "Priority: $priority" >> DEBIAN/control
		else
			echo "Priority: optional" >> DEBIAN/control
		fi
		if [ -n "$depends" ]; then
			echo "Depends: $depends" >> DEBIAN/control
		fi
		if [ -n "$conflicts" ]; then
			echo "Conflicts: $conflicts" >> DEBIAN/control
		fi
		if [ -n "$provides" ]; then
			echo "Provides: $provides" >> DEBIAN/control
		fi
		if [ -n "$replaces" ]; then
			echo "Replaces: $replaces" >> DEBIAN/control
		fi

		if [ -f "$TOPDIR/pre-install" ]; then
			cp "$TOPDIR/pre-install" DEBIAN/preinst
		fi
		if [ -f "$TOPDIR/post-install" ]; then
			cp "$TOPDIR/post-install" DEBIAN/postinst
		fi
		if [ -f "$TOPDIR/pre-remove" ]; then
			cp "$TOPDIR/pre-remove" DEBIAN/prerm
		fi
		if [ -f "$TOPDIR/post-remove" ]; then
			cp "$TOPDIR/post-remove" DEBIAN/postrm
		fi

		if [ -f "$TOPDIR/trigger" ]; then
			cp "$TOPDIR/trigger" DEBIAN/triggers
		fi

		if [ -n "$backup" ]; then
			for mybackup in ${backup[@]}; do
				echo "/${mybackup}" >> DEBIAN/conffiles
			done
		fi

		pushd "$WORK"/DEBIAN/
			tar zcf "$WORK"/control.tar.gz .
		popd

		echo '2.0' > debian-binary

		msg "Creating package archive"
		ar r "$TARGET" debian-binary control.tar.gz data.tar.gz

		if [ $? = 0 ]; then
			HAS_SUCCESS="yes"
		fi
		if [ "$HAS_SUCCESS" != "yes" ]; then
			die "Failed to create package"
		fi

		msg "Package was successfuly built"
	popd
}

build_package() {
	source_recipe

	if [ ! -d "$PKGDEST" ]; then
		PKGDEST="$TOPDIR"
	fi
	if [ ! -d "$SRCDEST" ]; then
		SRCDEST="$TOPDIR"
	fi

	TARGET="$PKGDEST/${name}_${version}-${release}_musl-linux-${BARCH}.deb"

	if [ "$FORCE" = "yes" ]; then
		rm -rf "$TARGET"
	fi

	if [ ! -f "$TARGET" ]; then
		msg "Building package: '${name}'"
		WORK="$PWD/work"
		PKG="$WORK/pkg"
		SRC="$WORK/src"

		rm -rf "$WORK"
		mkdir -p "$PKG" "$SRC"

		parse_options

		if [ "$USEBOOTSTRAP" = "yes" ]; then
			if [ -z "$OPT_BOOTSTRAP" ]; then
				die "This package couldn't be built in the cross environment"
			elif [ "$OPT_BOOTSTRAP" = "0" ]; then
				die "This package couldn't be built in the cross environment"
			fi
		fi

		if [ "$DOWNLOAD" != "no" ]; then
			download_source
		fi

		if [ "$EXTRACT" != "no" ]; then
			unpack_source
		fi

		if [ "$BUILD" != "no" ]; then
			compile_package
		fi

		if [ "$PACKAGE" != "no" ]; then
			create_package
			if [ "$CLEAN" != "no" ]; then
				rm -rf "$WORK"
			fi
		else
			if [ "$CLEAN" != "no" ]; then
				rm -rf "$WORK"
			fi
		fi
	fi
}

database_setup() {
	if [ -n "$ROOTDIR" ]; then
		ROOTFLAGS="--root=$ROOTDIR"
	fi

	for dirs in /var/lib/dpkg/info /var/lib/dpkg/updates /var/lib/dpkg/triggers; do
		if [ ! -d "${ROOTDIR}${dirs}" ]; then
			mkdir -p "${ROOTDIR}${dirs}"
		fi
	done

	if [ ! -f "${ROOTDIR}/var/lib/dpkg/status" ]; then
		touch "${ROOTDIR}"/var/lib/dpkg/status
	fi

	if [ ! -f "${ROOTDIR}/var/lib/dpkg/available" ]; then
		touch "${ROOTDIR}"/var/lib/dpkg/available
	fi

	if [ ! -f "${ROOTDIR}/var/lib/dpkg/arch" ]; then
		dpkg $ROOTFLAGS --add-architecture musl-linux-$BARCH
	fi
}

install_package_min() {
	msg "Installing package: '${apkg}'"

	dpkg $dpkgopts "$pkg" || die "Failed to install package"

	msg "Package was successfuly installed"
}

install_package() {
	local pkg rmdep

	if [ -f "$TARGET" ]; then
		pkg="$TARGET"
	else
		pkg="$1"
	fi

	if [ -z "$pkg" ]; then
		die "You haven't specified packge name"
	fi

	apkg="$(dpkg -I $pkg | grep 'Package:' | awk '{print $2}')"

	if [ "$FORCE" = "yes" ]; then
		FORCEFLAGS="--force-overwrite"
	fi

	if [ "$CONFLICTS" = "no" ]; then
		CONFLICTSFLAGS="--force-conflicts"
	fi

	if [ "$DEPENDS" = "no" ]; then
		DEPENDSFLAGS="--force-depends"
	fi

	if [ -n "$ROOTDIR" ]; then
		ROOTFLAGS="--root=$ROOTDIR"
	fi

	database_setup

	dpkgopts="$ROOTFLAGS $FORCEFLAGS $CONFLICTSFLAGS $DEPENDSFLAGS -i"

	if [ "$(is_installed $apkg)" = "yes" ]; then
		if [ "$NEEDED" = "yes" ]; then
			warn "$apkg: package is already installed"
		else
			install_package_min
		fi
	else
		install_package_min
	fi
}

remove_package() {
	local pkg="$1"

	if [ "$CONFLICTS" = "no" ]; then
		CONFLICTSFLAGS="--force-conflicts"
	fi

	if [ "$DEPENDS" = "no" ]; then
		DEPENDSFLAGS="--force-depends"
	fi

	if [ -n "$ROOTDIR" ]; then
		ROOTFLAGS="--root=$ROOTDIR"
	fi

	if [ -z "$pkg" ]; then
		die "You haven't specified packge name"
	fi

	if [ "$(is_installed $pkg)" != "yes" ]; then
		die "Your package is not installed"
	fi

	if [ -n "$(echo $MASKED | grep $pkg)" ]; then
		die "Your package is masked"
	fi

	if [ "$purge" = "yes" ]; then
		dpkgopts="$ROOTFLAGS $FORCEFLAGS -P"
	else
		dpkgopts="$ROOTFLAGS $FORCEFLAGS -r"
	fi

	msg "Removing package: '${pkg}'"
	dpkg $dpkgopts "$pkg" || die "Failed to remove package"

	msg "Package was successfuly removed"
}

emerge_package() {
	local HAS_SUCCESS="no"
	local pkg="$1"

	if [ -z "$REPOS" ]; then
		die "You haven't specified repositories"
	fi

	if [ -z "$pkg" ]; then
		die "You haven't specified packge name"
	fi

	if [ "$FORCE" = "yes" ]; then
		FORCEFLAGS="--force-overwrite"
	fi

	if [ "$CONFLICTS" = "no" ]; then
		CONFLICTSFLAGS="--force-conflicts"
	fi

	if [ "$DEPENDS" = "no" ]; then
		DEPENDSFLAGS="--force-depends"
	fi

	if [ -n "$ROOTDIR" ]; then
		ROOTFLAGS="--root=$ROOTDIR"
	fi

	pushd "$(find_portdir $pkg)"
		export TOPDIR="$PWD"
		source_recipe

		if [ "$CONFLICTS" != "no" ]; then
			if [ -n "$conflicts" ]; then
				for myconflicts in ${xconflicts[@]}; do
					if [ "$(is_installed $myconflicts)" = "yes" ]; then
						die "Your package is conflicting with $myconflicts"
					fi
				done
			fi
		fi

		if [ "$DEPENDS" != "no" ]; then
			if [ -n "$depends" ]; then
				(
					for mydepends in ${xdepends[@]}; do
						if [ "$(is_installed $mydepends)" != "yes" ]; then
							emerge_package $mydepends
						fi
					done
				)
				if [ $? = 0 ]; then
					HAS_SUCCESS="yes"
				fi
				if [ "$HAS_SUCCESS" != "yes" ]; then
					exit 1
				fi
			fi
		fi

		source_recipe
		build_package
		if [ "$PACKAGE" != "no" ]; then
			if [ ! -f "$TARGET" ]; then
				die "Package file wasn't found"
			fi
			install_package
		fi
	popd
}

system_upgrade() {
	local HAS_SUCCESS="no"
	local pkg updt

	FORCE="yes"
	NEEDED="no"

	msg "Checking for updates"

	for pkg in $(grep 'Package:' "$ROOTDIR/var/lib/dpkg/status" | awk '{print $2}'); do
		if [ -z "$(echo $MASKED | grep $pkg)" ]; then
			vercmp "$(find_instver $pkg)" "$(find_portver $pkg)"
			if [ $? = 255 ]; then
				echo "$pkg" >> /tmp/2update
			fi
		fi
	done

	if [ ! -f "/tmp/2update" ]; then
		warn "No updates were found"
		exit 0
	fi

	msg "Following packages will be updated"
	for updt in $(cat /tmp/2update); do
		echo " $updt"
	done

	(
		for updt in $(cat /tmp/2update); do
			emerge_package $updt
		done
	)
	if [ $? = 0 ]; then
		HAS_SUCCESS="yes"
	fi
	if [ "$HAS_SUCCESS" != "yes" ]; then
		exit 1
	fi
}

yui() {
printf "%b\n" \
"[s[?25l[48;2;98;64;45m[38;2;106;68;46m▄[48;2;123;79;44m[38;2;136;90;48m▄[48;2;137;86;42m[38;2;155;103;49m▄[48;2;140;90;46m[38;2;159;104;52m▄[48;2;137;90;47m[38;2;159;103;53m▄[48;2;138;91;46m[38;2;158;103;53m▄[48;2;138;90;47m[38;2;158;103;53m▄[48;2;137;92;46m[38;2;158;105;52m▄[48;2;139;94;48m[38;2;159;105;53m▄[48;2;143;97;50m[38;2;159;106;54m▄[48;2;144;96;52m[38;2;163;105;50m▄[48;2;144;96;47m[38;2;159;105;49m▄[48;2;110;76;46m[38;2;124;88;50m▄[48;2;63;43;35m[38;2;72;49;29m▄[48;2;60;46;34m[38;2;69;48;32m▄[48;2;61;47;35m[38;2;83;58;39m▄[48;2;59;44;33m[38;2;96;67;44m▄[48;2;60;43;29m[38;2;112;79;48m▄[48;2;67;46;30m[38;2;122;86;54m▄[48;2;82;57;38m[38;2;126;89;55m▄[48;2;100;73;48m[38;2;129;90;54m▄[48;2;103;75;48m[38;2;130;90;53m▄[48;2;105;77;50m[38;2;129;89;52m▄[48;2;96;69;43m[38;2;127;87;50m▄[48;2;85;62;36m[38;2;128;88;53m▄[48;2;101;74;47m[38;2;131;88;53m▄[48;2;112;81;50m[38;2;133;88;50m▄[48;2;114;82;51m[38;2;129;91;51m▄[48;2;112;80;51m[38;2;129;90;50m▄[48;2;106;83;61m[38;2;123;90;55m▄[48;2;110;98;83m[38;2;100;76;50m▄[48;2;108;98;84m[38;2;102;85;70m▄[48;2;112;100;86m[38;2;109;95;84m▄[48;2;114;100;88m[38;2;108;96;88m▄[48;2;113;103;91m[38;2;109;99;89m▄[48;2;113;104;91m[38;2;111;101;90m▄[48;2;115;105;93m[38;2;112;102;91m▄[48;2;116;106;93m[38;2;113;103;91m▄[48;2;116;107;92m[38;2;114;105;90m▄[48;2;119;110;95m[38;2;116;107;92m▄[48;2;125;116;101m[38;2;121;111;96m▄[48;2;128;116;102m[38;2;120;110;96m▄[48;2;128;116;102m[38;2;121;112;97m▄[48;2;129;116;102m[38;2;120;110;95m▄[48;2;129;116;102m[38;2;121;109;95m▄[48;2;131;118;102m[38;2;122;110;96m▄[48;2;131;117;102m[38;2;123;110;97m▄[48;2;129;115;100m[38;2;121;108;94m▄[m
[48;2;111;70;48m[38;2;114;71;52m▄[48;2;141;91;49m[38;2;142;91;50m▄[48;2;161;105;49m[38;2;162;105;51m▄[48;2;163;105;49m[38;2;164;104;49m▄[48;2;162;102;49m[38;2;162;102;49m▄[48;2;162;103;49m[38;2;163;103;50m▄[48;2;162;103;49m[38;2;163;103;50m▄[48;2;161;103;48m[38;2;163;104;49m▄[48;2;162;105;50m[38;2;160;105;53m▄[48;2;163;105;50m[38;2;155;102;52m▄[48;2;163;107;52m[38;2;133;87;42m▄[48;2;153;102;51m[38;2;127;86;44m▄[48;2;119;82;41m[38;2;129;91;51m▄[48;2;110;80;44m[38;2;129;90;51m▄[48;2;122;89;51m[38;2;132;90;52m▄[48;2;125;91;51m[38;2;131;89;51m▄[48;2;128;91;49m[38;2;132;90;52m▄[48;2;129;90;47m[38;2;130;91;51m▄[48;2;131;91;49m[38;2;130;91;51m▄[48;2;131;90;49m[38;2;130;91;51m▄[48;2;131;90;49m[38;2;129;91;52m▄[48;2;131;90;51m[38;2;129;91;53m▄[48;2;131;90;50m[38;2;128;90;53m▄[48;2;130;90;51m[38;2;126;87;51m▄[48;2;127;91;50m[38;2;131;90;52m▄[48;2;129;92;52m[38;2;132;91;53m▄[48;2;129;91;51m[38;2;132;91;54m▄[48;2;129;91;52m[38;2;129;91;54m▄[48;2;132;89;49m[38;2;130;90;52m▄[48;2;131;89;49m[38;2;132;90;50m▄[48;2;123;87;53m[38;2;129;90;51m▄[48;2;106;78;49m[38;2;121;85;46m▄[48;2;105;85;64m[38;2;121;89;56m▄[48;2;117;101;87m[38;2;112;85;56m▄[48;2;115;104;95m[38;2;111;95;81m▄[48;2;115;104;95m[38;2;118;107;98m▄[48;2;116;106;97m[38;2;118;108;98m▄[48;2;118;109;97m[38;2;120;110;98m▄[48;2;120;111;96m[38;2;121;112;98m▄[48;2;122;113;98m[38;2;123;113;99m▄[48;2;124;115;100m[38;2;126;116;102m▄[48;2;124;116;101m[38;2;127;118;104m▄[48;2;125;117;102m[38;2;127;118;104m▄[48;2;126;117;102m[38;2;128;118;106m▄[48;2;126;117;103m[38;2;128;119;104m▄[48;2;127;116;104m[38;2;128;118;105m▄[48;2;127;117;104m[38;2;128;119;105m▄[48;2;127;114;102m[38;2;127;117;103m▄[m
[48;2;114;73;50m[38;2;115;74;48m▄[48;2;143;93;50m[38;2;144;94;49m▄[48;2;163;106;52m[38;2;164;107;51m▄[48;2;164;105;49m[38;2;163;106;50m▄[48;2;162;103;48m[38;2;161;104;49m▄[48;2;162;103;50m[38;2;160;103;49m▄[48;2;162;103;49m[38;2;161;104;52m▄[48;2;163;105;50m[38;2;149;97;49m▄[48;2;150;99;50m[38;2;130;85;41m▄[48;2;128;84;42m[38;2;130;91;51m▄[48;2;131;90;50m[38;2;131;92;53m▄[48;2;130;91;50m[38;2;131;92;51m▄[48;2;130;91;51m[38;2;131;92;51m▄[48;2;131;91;51m[38;2;131;92;51m▄[48;2;132;91;53m[38;2;134;92;54m▄[48;2;132;91;52m[38;2;134;92;54m▄[48;2;132;90;52m[38;2;134;92;54m▄[48;2;130;91;53m[38;2;132;93;54m▄[48;2;131;91;53m[38;2;132;93;54m▄[48;2;131;92;53m[38;2;132;93;54m▄[48;2;131;93;53m[38;2;132;93;53m▄[48;2;131;92;51m[38;2;132;93;52m▄[48;2;128;90;51m[38;2;126;86;48m▄[48;2;125;86;49m[38;2;129;89;52m▄[48;2;131;92;51m[38;2;132;93;52m▄[48;2;131;92;51m[38;2;132;93;52m▄[48;2;131;93;52m[38;2;132;93;52m▄[48;2;131;91;50m[38;2;131;92;51m▄[48;2;128;89;48m[38;2;130;91;51m▄[48;2;128;88;47m[38;2;120;80;43m▄[48;2;129;91;50m[38;2;130;90;53m▄[48;2;129;91;53m[38;2;131;91;52m▄[48;2;119;82;46m[38;2;127;89;51m▄[48;2;127;92;56m[38;2;121;85;48m▄[48;2;117;87;58m[38;2;132;91;51m▄[48;2;108;91;73m[38;2;123;90;56m▄[48;2;117;110;98m[38;2;109;92;71m▄[48;2;119;111;99m[38;2;122;110;97m▄[48;2;122;112;99m[38;2;125;112;101m▄[48;2;123;113;101m[38;2;124;114;102m▄[48;2;126;116;104m[38;2;126;119;106m▄[48;2;128;118;106m[38;2;128;118;106m▄[48;2;129;119;107m[38;2;129;119;107m▄[48;2;129;119;107m[38;2;130;120;108m▄[48;2;129;120;105m[38;2;130;121;106m▄[48;2;129;120;105m[38;2;131;122;107m▄[48;2;130;121;105m[38;2;131;122;107m▄[48;2;128;119;104m[38;2;129;120;105m▄[m
[48;2;116;75;49m[38;2;116;76;48m▄[48;2;145;95;49m[38;2;145;94;51m▄[48;2;165;109;50m[38;2;164;108;51m▄[48;2;164;108;50m[38;2;166;108;50m▄[48;2;161;105;49m[38;2;165;104;50m▄[48;2;160;105;49m[38;2;159;105;52m▄[48;2;155;102;51m[38;2;132;85;40m▄[48;2;126;84;41m[38;2;132;89;49m▄[48;2;132;90;50m[38;2;133;91;51m▄[48;2;132;92;50m[38;2;134;92;52m▄[48;2;132;92;51m[38;2;133;92;53m▄[48;2;131;92;52m[38;2;132;92;54m▄[48;2;131;92;51m[38;2;131;93;54m▄[48;2;131;92;52m[38;2;125;88;49m▄[48;2;133;92;54m[38;2;128;92;54m▄[48;2;133;92;54m[38;2;131;91;51m▄[48;2;134;91;53m[38;2;133;91;50m▄[48;2;131;92;53m[38;2;123;85;45m▄[48;2;124;85;46m[38;2;127;88;49m▄[48;2;130;91;52m[38;2;131;91;53m▄[48;2;132;93;53m[38;2;133;92;55m▄[48;2;132;93;52m[38;2;133;91;56m▄[48;2;124;85;46m[38;2;120;82;45m▄[48;2;130;90;53m[38;2;128;92;55m▄[48;2;131;93;52m[38;2;127;90;51m▄[48;2;132;93;52m[38;2;133;94;54m▄[48;2;132;93;52m[38;2;133;93;53m▄[48;2;131;93;50m[38;2;132;93;54m▄[48;2;131;91;52m[38;2;133;91;54m▄[48;2;121;80;46m[38;2;126;86;50m▄[48;2;129;88;54m[38;2;121;85;48m▄[48;2;132;90;50m[38;2;132;91;54m▄[48;2;131;91;52m[38;2;133;89;50m▄[48;2;125;87;50m[38;2;131;90;52m▄[48;2;130;91;53m[38;2;130;92;52m▄[48;2;130;92;51m[38;2;131;92;54m▄[48;2;123;91;56m[38;2;131;91;53m▄[48;2;115;93;72m[38;2;122;89;55m▄[48;2;127;112;100m[38;2;119;101;79m▄[48;2;125;117;104m[38;2;127;119;107m▄[48;2;126;120;105m[38;2;130;120;106m▄[48;2;129;120;107m[38;2;131;121;107m▄[48;2;130;120;107m[38;2;131;122;107m▄[48;2;131;121;109m[38;2;133;123;108m▄[48;2;131;122;108m[38;2;132;124;109m▄[48;2;132;123;108m[38;2;132;124;109m▄[48;2;132;123;108m[38;2;133;125;110m▄[48;2;131;122;107m[38;2;133;124;109m▄[m
[48;2;117;76;49m[38;2;117;77;48m▄[48;2;145;94;51m[38;2;144;94;51m▄[48;2;164;108;50m[38;2;163;107;49m▄[48;2;167;108;46m[38;2;166;108;47m▄[48;2;163;106;49m[38;2;153;101;49m▄[48;2;136;89;43m[38;2;129;85;44m▄[48;2;132;90;51m[38;2;133;89;52m▄[48;2;132;90;50m[38;2;133;90;51m▄[48;2;133;91;51m[38;2;133;91;51m▄[48;2;133;91;51m[38;2;133;91;51m▄[48;2;133;91;53m[38;2;134;91;53m▄[48;2;132;92;53m[38;2;132;92;53m▄[48;2;129;91;52m[38;2;122;83;44m▄[48;2;124;85;46m[38;2;130;92;51m▄[48;2;131;92;53m[38;2;133;92;51m▄[48;2;132;93;54m[38;2;132;93;55m▄[48;2;129;90;51m[38;2;119;83;45m▄[48;2;122;87;47m[38;2;133;91;54m▄[48;2;131;93;54m[38;2;133;93;54m▄[48;2;133;91;53m[38;2;131;93;54m▄[48;2;135;91;55m[38;2;128;91;53m▄[48;2;133;90;55m[38;2;131;93;56m▄[48;2;119;82;45m[38;2;140;101;64m▄[48;2;128;94;56m[38;2;131;92;56m▄[48;2;122;87;48m[38;2;117;84;45m▄[48;2;132;94;54m[38;2;133;94;54m▄[48;2;135;93;53m[38;2;138;92;54m▄[48;2;133;93;54m[38;2;134;93;53m▄[48;2;133;92;51m[38;2;133;92;49m▄[48;2;128;91;53m[38;2;120;86;48m▄[48;2;96;66;33m[38;2;88;63;35m▄[48;2;123;90;54m[38;2;91;65;39m▄[48;2;133;91;50m[38;2;130;92;55m▄[48;2;132;91;48m[38;2;133;90;50m▄[48;2;131;92;52m[38;2;132;92;53m▄[48;2;131;92;53m[38;2;131;92;53m▄[48;2;131;92;53m[38;2;130;91;52m▄[48;2;132;91;54m[38;2;129;87;50m▄[48;2;118;89;56m[38;2;130;94;55m▄[48;2;128;113;94m[38;2;117;94;66m▄[48;2;130;120;110m[38;2;135;120;108m▄[48;2;132;123;109m[38;2;133;123;108m▄[48;2;133;124;109m[38;2;134;125;110m▄[48;2;134;125;110m[38;2;135;126;111m▄[48;2;134;125;110m[38;2;138;126;112m▄[48;2;135;126;111m[38;2;139;127;113m▄[48;2;135;126;111m[38;2;138;126;112m▄[48;2;135;125;110m[38;2;137;125;111m▄[m
[48;2;118;76;51m[38;2;118;75;54m▄[48;2;144;94;50m[38;2;145;94;50m▄[48;2;164;107;48m[38;2;161;109;49m▄[48;2;163;108;51m[38;2;143;96;43m▄[48;2;129;86;40m[38;2;122;86;44m▄[48;2;130;90;52m[38;2;117;83;45m▄[48;2;133;88;49m[38;2;131;92;51m▄[48;2;131;91;51m[38;2;131;92;51m▄[48;2;132;92;52m[38;2;132;93;52m▄[48;2;132;93;52m[38;2;132;93;53m▄[48;2;131;93;50m[38;2;131;94;50m▄[48;2;130;91;53m[38;2;120;83;45m▄[48;2;123;85;48m[38;2;130;92;54m▄[48;2;133;91;53m[38;2;132;93;51m▄[48;2;135;90;54m[38;2;133;91;51m▄[48;2;123;88;47m[38;2;116;82;43m▄[48;2;131;101;49m[38;2;127;93;46m▄[48;2;130;94;45m[38;2;147;114;53m▄[48;2;135;95;53m[38;2;146;111;59m▄[48;2;125;89;52m[38;2;123;90;47m▄[48;2;128;97;60m[38;2;171;142;104m▄[48;2;180;144;107m[38;2;242;209;173m▄[48;2;147;107;70m[38;2;173;135;99m▄[48;2;134;96;58m[38;2;133;96;59m▄[48;2;113;79;42m[38;2;121;86;50m▄[48;2;131;93;55m[38;2;130;92;54m▄[48;2;136;92;53m[38;2;136;92;53m▄[48;2;135;92;52m[38;2;136;93;53m▄[48;2;134;92;50m[38;2;135;93;51m▄[48;2;121;88;48m[38;2;128;92;52m▄[48;2;89;65;36m[38;2;92;66;37m▄[48;2;68;45;26m[38;2;63;45;29m▄[48;2;112;78;50m[38;2;76;51;29m▄[48;2;130;91;52m[38;2;118;85;50m▄[48;2;133;92;53m[38;2;131;93;54m▄[48;2;134;91;53m[38;2;134;91;53m▄[48;2;130;93;54m[38;2;129;91;52m▄[48;2;117;83;42m[38;2;122;87;50m▄[48;2;131;91;49m[38;2;125;85;47m▄[48;2;126;92;56m[38;2;130;94;56m▄[48;2;125;104;85m[38;2;117;92;62m▄[48;2;133;122;110m[38;2;136;123;108m▄[48;2;136;124;110m[38;2;138;126;112m▄[48;2;138;127;112m[38;2;140;128;115m▄[48;2;140;127;114m[38;2;141;127;115m▄[48;2;140;126;115m[38;2;141;127;116m▄[48;2;140;126;115m[38;2;141;127;116m▄[48;2;139;125;114m[38;2;141;127;116m▄[m
[48;2;118;76;52m[38;2;118;78;48m▄[48;2;146;96;50m[38;2;146;97;52m▄[48;2;152;105;54m[38;2;128;87;44m▄[48;2;112;76;35m[38;2;110;77;46m▄[48;2;114;82;45m[38;2;116;81;48m▄[48;2;124;90;51m[38;2;121;85;47m▄[48;2;128;92;50m[38;2;127;88;49m▄[48;2;131;92;54m[38;2;133;91;52m▄[48;2;131;92;54m[38;2;129;90;52m▄[48;2;124;85;46m[38;2;120;80;46m▄[48;2;130;92;52m[38;2;124;86;49m▄[48;2;121;83;46m[38;2;125;87;51m▄[48;2;131;93;53m[38;2;131;94;52m▄[48;2;132;93;50m[38;2;133;94;52m▄[48;2;131;92;51m[38;2;126;87;50m▄[48;2;123;85;45m[38;2;131;93;52m▄[48;2;136;93;55m[38;2;137;93;56m▄[48;2;135;95;52m[38;2;137;96;59m▄[48;2;125;92;52m[38;2;121;91;54m▄[48;2;130;101;68m[38;2;194;169;131m▄[48;2;224;195;164m[38;2;210;182;148m▄[48;2;239;212;177m[38;2;237;211;178m▄[48;2;214;183;146m[38;2;229;203;166m▄[48;2;136;100;64m[38;2;136;105;67m▄[48;2;133;97;62m[38;2;138;102;67m▄[48;2;128;90;52m[38;2;128;90;52m▄[48;2;136;93;53m[38;2;136;93;55m▄[48;2;135;94;52m[38;2;136;93;53m▄[48;2;136;93;52m[38;2;136;92;52m▄[48;2;133;92;54m[38;2;134;92;55m▄[48;2;109;76;44m[38;2;116;77;42m▄[48;2;92;68;45m[38;2;145;109;75m▄[48;2;64;45;28m[38;2;69;47;27m▄[48;2;87;59;34m[38;2;67;46;28m▄[48;2;128;93;55m[38;2;119;87;52m▄[48;2;132;91;53m[38;2;133;92;53m▄[48;2;132;91;53m[38;2;133;92;53m▄[48;2;127;91;54m[38;2;130;93;53m▄[48;2;118;82;45m[38;2;117;81;43m▄[48;2;130;92;54m[38;2;130;92;54m▄[48;2;127;93;54m[38;2;132;93;54m▄[48;2;129;111;89m[38;2;119;96;68m▄[48;2;138;127;116m[38;2;139;127;115m▄[48;2;141;128;118m[38;2;140;128;118m▄[48;2;143;128;117m[38;2;143;129;117m▄[48;2;142;128;117m[38;2;143;130;118m▄[48;2;143;129;118m[38;2;144;131;119m▄[48;2;142;128;117m[38;2;143;130;118m▄[m
[48;2;116;77;51m[38;2;113;73;53m▄[48;2;127;85;47m[38;2;113;76;42m▄[48;2;112;76;39m[38;2;108;78;41m▄[48;2;105;72;40m[38;2;115;83;50m▄[48;2;124;90;53m[38;2;119;85;48m▄[48;2;114;80;42m[38;2;123;89;51m▄[48;2;132;90;53m[38;2;130;90;53m▄[48;2;131;90;49m[38;2;124;89;56m▄[48;2;113;79;41m[38;2;86;56;29m▄[48;2;119;84;50m[38;2;128;91;55m▄[48;2;118;82;46m[38;2;118;80;44m▄[48;2;129;94;54m[38;2;131;95;53m▄[48;2;133;94;51m[38;2;133;95;52m▄[48;2;134;95;52m[38;2;133;97;59m▄[48;2;126;93;45m[38;2;116;89;46m▄[48;2;141;111;59m[38;2;152;129;81m▄[48;2;133;98;52m[38;2;208;179;138m▄[48;2;128;95;62m[38;2;227;200;165m▄[48;2;147;122;92m[38;2;204;183;152m▄[48;2;221;197;166m[38;2;201;180;149m▄[48;2;215;188;158m[38;2;219;192;163m▄[48;2;187;160;130m[38;2;234;207;178m▄[48;2;225;198;167m[38;2;220;193;165m▄[48;2;144;117;83m[38;2;146;119;90m▄[48;2;152;118;81m[38;2;155;125;90m▄[48;2;144;107;70m[38;2;201;167;131m▄[48;2;136;94;58m[38;2;130;94;57m▄[48;2;137;93;55m[38;2;138;95;57m▄[48;2;135;94;54m[38;2;136;94;55m▄[48;2;132;93;54m[38;2;132;93;55m▄[48;2;117;80;44m[38;2;124;87;51m▄[48;2;164;122;84m[38;2;167;121;80m▄[48;2;102;72;43m[38;2;156;118;81m▄[48;2;66;47;31m[38;2;76;52;33m▄[48;2;99;72;44m[38;2;82;58;34m▄[48;2;131;92;52m[38;2;130;94;57m▄[48;2;133;93;51m[38;2;133;93;51m▄[48;2;131;93;53m[38;2;133;94;53m▄[48;2;123;85;47m[38;2;126;88;50m▄[48;2;128;91;55m[38;2;126;89;53m▄[48;2;132;92;52m[38;2;132;91;51m▄[48;2;121;91;60m[38;2;129;92;59m▄[48;2;135;121;104m[38;2;126;107;85m▄[48;2;141;129;119m[38;2;144;130;119m▄[48;2;143;130;116m[38;2;144;131;118m▄[48;2;144;132;118m[38;2;145;133;119m▄[48;2;145;133;119m[38;2;147;135;121m▄[48;2;146;132;119m[38;2;147;134;120m▄[m
[48;2;104;67;42m[38;2;108;73;45m▄[48;2;117;81;46m[38;2;109;76;45m▄[48;2;121;82;42m[38;2;123;82;41m▄[48;2;128;89;54m[38;2;123;91;54m▄[48;2;103;69;33m[38;2;79;55;29m▄[48;2;126;91;53m[38;2;117;86;55m▄[48;2;128;90;52m[38;2;87;61;31m▄[48;2;91;61;36m[38;2;62;42;26m▄[48;2;80;55;35m[38;2;81;57;36m▄[48;2;129;91;54m[38;2;126;90;56m▄[48;2;121;82;44m[38;2;125;86;48m▄[48;2;132;97;54m[38;2;133;99;60m▄[48;2;136;98;57m[38;2;159;127;88m▄[48;2;138;101;67m[38;2;224;195;156m▄[48;2;178;149;116m[38;2;241;215;176m▄[48;2;236;211;172m[38;2;241;216;176m▄[48;2;243;212;180m[38;2;242;216;176m▄[48;2;242;214;175m[38;2;242;214;175m▄[48;2;240;215;181m[38;2;241;211;175m▄[48;2;228;202;168m[38;2;239;212;176m▄[48;2;223;194;159m[38;2;232;207;170m▄[48;2;211;184;151m[38;2;241;213;175m▄[48;2;215;188;157m[38;2;212;185;147m▄[48;2;176;149;119m[38;2;229;202;170m▄[48;2;143;116;83m[38;2;156;127;97m▄[48;2;238;208;173m[38;2;231;205;176m▄[48;2;153;119;83m[38;2;213;184;151m▄[48;2;139;97;59m[38;2;139;99;61m▄[48;2;136;95;55m[38;2;138;97;55m▄[48;2;134;95;56m[38;2;137;97;55m▄[48;2;130;96;62m[38;2;135;98;61m▄[48;2;186;144;103m[38;2;227;193;155m▄[48;2;174;129;86m[38;2;186;146;105m▄[48;2;118;82;54m[38;2;166;122;82m▄[48;2;73;52;29m[38;2;83;56;31m▄[48;2;125;90;55m[38;2;111;81;53m▄[48;2;134;94;51m[38;2;137;94;53m▄[48;2;133;93;53m[38;2;134;95;53m▄[48;2;128;90;52m[38;2;129;91;52m▄[48;2;125;87;51m[38;2;125;86;49m▄[48;2;134;92;53m[38;2;136;92;52m▄[48;2;134;93;56m[38;2;132;89;54m▄[48;2;120;98;71m[38;2;119;88;61m▄[48;2;146;132;120m[38;2;144;129;115m▄[48;2;145;132;120m[38;2;149;134;122m▄[48;2;146;134;120m[38;2;151;135;122m▄[48;2;149;137;123m[38;2;153;137;124m▄[48;2;149;135;122m[38;2;152;136;122m▄[m
[48;2;112;79;52m[38;2;106;74;46m▄[48;2;102;70;37m[38;2;104;75;42m▄[48;2;130;88;45m[38;2;125;90;54m▄[48;2;108;76;43m[38;2;76;56;36m▄[48;2;59;41;24m[38;2;46;42;37m▄[48;2;63;44;30m[38;2;51;45;47m▄[48;2;51;41;31m[38;2;49;52;58m▄[48;2;49;43;40m[38;2;51;54;60m▄[48;2;59;51;43m[38;2;52;57;64m▄[48;2;88;71;55m[38;2;60;60;61m▄[48;2;121;95;64m[38;2;140;127;112m▄[48;2;187;157;120m[38;2;237;212;183m▄[48;2;239;209;172m[38;2;242;213;175m▄[48;2;242;214;178m[38;2;241;215;176m▄[48;2;243;214;176m[38;2;244;214;176m▄[48;2;244;215;176m[38;2;245;214;176m▄[48;2;244;215;176m[38;2;235;203;165m▄[48;2;217;187;145m[38;2;174;134;94m▄[48;2;179;139;95m[38;2;176;132;87m▄[48;2;172;134;94m[38;2;139;108;78m▄[48;2;145;117;86m[38;2;83;68;53m▄[48;2;188;164;133m[38;2;81;68;51m▄[48;2;239;212;178m[38;2;220;199;173m▄[48;2;205;176;141m[38;2;226;202;166m▄[48;2;221;196;171m[38;2;214;190;162m▄[48;2;147;127;101m[38;2;217;196;168m▄[48;2;217;194;164m[38;2;199;176;144m▄[48;2;142;107;71m[38;2;178;149;114m▄[48;2;140;100;59m[38;2;141;101;64m▄[48;2;140;98;56m[38;2;142;99;58m▄[48;2;134;100;64m[38;2;135;101;65m▄[48;2;225;197;164m[38;2;225;197;167m▄[48;2;233;197;159m[38;2;238;210;176m▄[48;2;177;136;95m[38;2;188;158;122m▄[48;2;119;90;66m[38;2;143;116;85m▄[48;2;100;73;47m[38;2;162;137;108m▄[48;2;132;95;59m[38;2;199;169;133m▄[48;2;136;95;60m[38;2;152;122;87m▄[48;2;133;91;56m[38;2;131;99;64m▄[48;2;122;85;51m[38;2;120;89;56m▄[48;2;132;93;55m[38;2;131;97;60m▄[48;2;129;88;53m[38;2;129;92;55m▄[48;2;118;86;58m[38;2;120;89;58m▄[48;2;140;123;106m[38;2;135;117;95m▄[48;2;150;135;123m[38;2;151;135;122m▄[48;2;152;136;123m[38;2;153;137;124m▄[48;2;154;138;125m[38;2;155;139;126m▄[48;2;154;138;124m[38;2;154;138;125m▄[m
[48;2;99;71;45m[38;2;57;54;49m▄[48;2;95;76;52m[38;2;53;55;54m▄[48;2;76;60;46m[38;2;49;56;62m▄[48;2;53;51;49m[38;2;47;55;64m▄[48;2;49;54;60m[38;2;47;55;63m▄[48;2;48;53;62m[38;2;46;53;61m▄[48;2;47;54;64m[38;2;46;53;61m▄[48;2;48;54;62m[38;2;47;54;62m▄[48;2;48;57;65m[38;2;48;55;63m▄[48;2;54;61;68m[38;2;53;59;67m▄[48;2;72;71;70m[38;2;64;67;71m▄[48;2;207;188;164m[38;2;181;165;143m▄[48;2;244;214;174m[38;2;242;213;173m▄[48;2;242;215;176m[38;2;240;214;176m▄[48;2;245;214;177m[38;2;240;216;179m▄[48;2;246;215;178m[38;2;228;199;164m▄[48;2;186;151;113m[38;2;173;133;96m▄[48;2;177;130;94m[38;2;156;117;85m▄[48;2;120;91;64m[38;2;57;46;30m▄[48;2;56;44;32m[38;2;100;98;91m▄[48;2;79;73;69m[38;2;100;94;85m▄[48;2;111;105;98m[38;2;105;102;95m▄[48;2;138;129;115m[38;2;154;152;144m▄[48;2;183;170;145m[38;2;127;123;109m▄[48;2;171;148;121m[38;2;214;195;167m▄[48;2;175;150;120m[38;2;234;210;173m▄[48;2;216;190;156m[38;2;242;216;180m▄[48;2;231;204;167m[38;2;244;216;177m▄[48;2;142;106;70m[38;2;179;148;110m▄[48;2;142;102;63m[38;2;141;106;68m▄[48;2;142;106;68m[38;2;155;120;82m▄[48;2;235;205;170m[38;2;243;213;177m▄[48;2;178;150;119m[38;2;215;187;159m▄[48;2;194;172;141m[38;2;186;167;140m▄[48;2;235;210;177m[38;2;186;160;128m▄[48;2;237;211;176m[38;2;170;138;99m▄[48;2;240;213;178m[38;2;169;141;111m▄[48;2;225;201;166m[38;2;198;175;141m▄[48;2;186;162;127m[38;2;235;212;177m▄[48;2;233;207;173m[38;2;231;208;172m▄[48;2;160;129;97m[38;2;199;175;143m▄[48;2;132;97;63m[38;2;192;162;129m▄[48;2;123;92;61m[38;2;166;139;107m▄[48;2;132;112;93m[38;2;129;110;90m▄[48;2;153;136;124m[38;2;154;138;126m▄[48;2;155;139;126m[38;2;156;140;126m▄[48;2;156;140;127m[38;2;158;142;127m▄[48;2;156;140;126m[38;2;158;141;126m▄[m
[48;2;48;52;62m[38;2;47;51;63m▄[48;2;49;53;61m[38;2;47;51;62m▄[48;2;49;53;60m[38;2;46;51;60m▄[48;2;48;53;60m[38;2;47;53;61m▄[48;2;47;53;62m[38;2;47;53;62m▄[48;2;46;53;61m[38;2;46;53;61m▄[48;2;46;53;61m[38;2;46;53;61m▄[48;2;47;54;62m[38;2;47;54;62m▄[48;2;48;55;63m[38;2;48;55;64m▄[48;2;51;59;67m[38;2;51;58;66m▄[48;2;62;66;74m[38;2;61;65;74m▄[48;2;165;150;132m[38;2;157;144;126m▄[48;2;241;213;174m[38;2;240;214;173m▄[48;2;240;216;175m[38;2;241;215;176m▄[48;2;238;214;176m[38;2;221;193;157m▄[48;2;191;166;129m[38;2;237;212;175m▄[48;2;221;186;148m[38;2;242;214;175m▄[48;2;160;135;107m[38;2;187;167;135m▄[48;2;98;92;81m[38;2;166;159;148m▄[48;2;159;161;153m[38;2;162;159;157m▄[48;2;48;46;35m[38;2;46;40;35m▄[48;2;69;67;60m[38;2;44;33;32m▄[48;2;68;66;61m[38;2;44;40;35m▄[48;2;129;125;114m[38;2;154;146;132m▄[48;2;235;215;181m[38;2;240;218;185m▄[48;2;243;216;177m[38;2;244;216;179m▄[48;2;244;216;179m[38;2;246;217;183m▄[48;2;243;216;176m[38;2;244;217;178m▄[48;2;232;204;166m[38;2;243;216;177m▄[48;2;139;110;74m[38;2;177;151;117m▄[48;2;174;144;108m[38;2;194;170;138m▄[48;2;222;199;166m[38;2;171;156;133m▄[48;2;104;88;70m[38;2;144;140;133m▄[48;2;84;73;58m[38;2;104;103;99m▄[48;2;201;178;149m[38;2;93;83;64m▄[48;2;182;149;108m[38;2;204;178;141m▄[48;2;167;139;106m[38;2;174;144;114m▄[48;2;234;211;177m[38;2;201;175;140m▄[48;2;218;193;160m[38;2;178;146;113m▄[48;2;213;188;157m[38;2;192;158;127m▄[48;2;233;208;175m[38;2;191;159;125m▄[48;2;232;207;173m[38;2;171;142;109m▄[48;2;229;205;170m[38;2;232;203;169m▄[48;2;157;139;114m[38;2;206;182;157m▄[48;2;155;139;124m[38;2;157;141;125m▄[48;2;158;142;126m[38;2;160;144;128m▄[48;2;159;144;127m[38;2;160;144;126m▄[48;2;159;143;125m[38;2;159;144;124m▄[m
[48;2;46;53;61m[38;2;46;53;61m▄[48;2;46;53;61m[38;2;46;53;61m▄[48;2;46;53;60m[38;2;46;53;61m▄[48;2;46;53;60m[38;2;46;53;61m▄[48;2;46;53;61m[38;2;46;53;61m▄[48;2;46;53;61m[38;2;46;53;61m▄[48;2;46;53;61m[38;2;46;53;62m▄[48;2;47;54;64m[38;2;47;54;64m▄[48;2;48;55;65m[38;2;48;55;65m▄[48;2;50;57;67m[38;2;50;57;67m▄[48;2;59;65;71m[38;2;59;64;71m▄[48;2;149;137;120m[38;2;141;130;114m▄[48;2;240;214;175m[38;2;241;213;177m▄[48;2;243;214;177m[38;2;242;213;176m▄[48;2;244;215;179m[38;2;243;215;176m▄[48;2;243;215;175m[38;2;243;215;177m▄[48;2;242;214;178m[38;2;243;215;176m▄[48;2;202;178;146m[38;2;232;207;172m▄[48;2;228;217;197m[38;2;204;186;160m▄[48;2;182;179;167m[38;2;223;218;201m▄[48;2;91;74;57m[38;2;100;87;71m▄[48;2;118;84;66m[38;2;94;73;52m▄[48;2;48;50;39m[38;2;116;107;91m▄[48;2;199;187;169m[38;2;237;218;187m▄[48;2;243;215;177m[38;2;245;217;178m▄[48;2;246;218;179m[38;2;246;218;179m▄[48;2;246;217;179m[38;2;246;218;179m▄[48;2;245;218;179m[38;2;246;218;179m▄[48;2;246;217;177m[38;2;246;217;177m▄[48;2;239;211;175m[38;2;242;217;180m▄[48;2;227;206;180m[38;2;221;207;181m▄[48;2;108;98;84m[38;2;71;68;57m▄[48;2;179;176;170m[38;2;47;45;39m▄[48;2;106;102;98m[38;2;59;57;55m▄[48;2;66;62;50m[38;2;86;83;79m▄[48;2;197;176;146m[38;2;174;159;131m▄[48;2;139;109;82m[38;2;122;100;75m▄[48;2;188;163;127m[38;2;184;160;126m▄[48;2;229;196;156m[38;2;242;211;173m▄[48;2;172;131;90m[38;2;183;150;114m▄[48;2;168;133;96m[38;2;212;184;153m▄[48;2;181;151;115m[38;2;240;211;178m▄[48;2;210;182;149m[38;2;237;208;171m▄[48;2;177;157;131m[38;2;230;206;172m▄[48;2;158;142;125m[38;2;171;149;125m▄[48;2;161;143;127m[38;2;161;142;124m▄[48;2;162;145;126m[38;2;162;145;125m▄[48;2;161;145;125m[38;2;163;146;123m▄[m
[48;2;46;53;61m[38;2;44;52;62m▄[48;2;46;53;61m[38;2;45;52;62m▄[48;2;46;53;61m[38;2;48;52;63m▄[48;2;46;53;61m[38;2;47;53;63m▄[48;2;46;53;61m[38;2;46;53;63m▄[48;2;46;53;61m[38;2;47;54;63m▄[48;2;47;54;62m[38;2;48;53;63m▄[48;2;48;54;64m[38;2;48;55;61m▄[48;2;47;54;64m[38;2;47;55;60m▄[48;2;49;56;66m[38;2;51;54;67m▄[48;2;56;61;69m[38;2;55;58;67m▄[48;2;109;97;82m[38;2;88;71;57m▄[48;2;213;185;152m[38;2;131;96;58m▄[48;2;229;200;164m[38;2;133;98;61m▄[48;2;224;196;163m[38;2;100;72;43m▄[48;2;230;201;171m[38;2;91;70;47m▄[48;2;242;214;178m[38;2;152;124;94m▄[48;2;240;216;180m[38;2;211;184;149m▄[48;2;234;208;173m[38;2;217;188;152m▄[48;2;221;198;169m[38;2;235;205;171m▄[48;2;184;170;155m[38;2;240;215;181m▄[48;2;149;144;126m[38;2;205;175;141m▄[48;2;230;214;192m[38;2;244;210;176m▄[48;2;243;217;173m[38;2;243;217;176m▄[48;2;245;217;179m[38;2;245;217;179m▄[48;2;245;217;178m[38;2;245;217;178m▄[48;2;246;218;179m[38;2;246;218;179m▄[48;2;246;217;178m[38;2;245;217;179m▄[48;2;246;218;177m[38;2;245;217;178m▄[48;2;239;218;181m[38;2;241;216;183m▄[48;2;198;187;162m[38;2;218;203;178m▄[48;2;58;52;41m[38;2;91;77;64m▄[48;2;52;43;33m[38;2;89;70;59m▄[48;2;72;66;60m[38;2;153;147;135m▄[48;2;109;102;93m[38;2;201;185;161m▄[48;2;202;184;155m[38;2;181;162;132m▄[48;2;96;73;51m[38;2;86;67;47m▄[48;2;173;149;122m[38;2;180;155;131m▄[48;2;241;213;177m[38;2;241;213;176m▄[48;2;221;188;148m[38;2;237;203;163m▄[48;2;170;133;96m[38;2;169;128;86m▄[48;2;172;132;97m[38;2;179;135;92m▄[48;2;172;134;97m[38;2;171;128;90m▄[48;2;211;181;146m[38;2;220;187;152m▄[48;2;227;204;174m[38;2;237;211;176m▄[48;2;139;126;107m[38;2;118;107;93m▄[48;2;149;139;125m[38;2;70;70;71m▄[48;2;160;144;127m[38;2;85;83;79m▄[m
[48;2;44;52;62m[38;2;45;53;63m▄[48;2;45;52;62m[38;2;46;52;63m▄[48;2;48;51;62m[38;2;48;51;62m▄[48;2;47;52;62m[38;2;47;52;61m▄[48;2;47;54;63m[38;2;47;54;62m▄[48;2;48;55;64m[38;2;48;54;62m▄[48;2;48;55;63m[38;2;50;55;62m▄[48;2;47;58;57m[38;2;81;75;59m▄[48;2;50;54;66m[38;2;123;111;69m▄[48;2;51;56;65m[38;2;64;61;52m▄[48;2;54;58;63m[38;2;53;58;65m▄[48;2;88;69;55m[38;2;84;66;50m▄[48;2;131;94;56m[38;2;129;92;54m▄[48;2;132;95;54m[38;2;133;93;50m▄[48;2;106;74;44m[38;2;122;84;50m▄[48;2;81;61;37m[38;2;80;56;31m▄[48;2;133;103;74m[38;2;128;97;67m▄[48;2;239;210;174m[38;2;232;204;167m▄[48;2;237;208;173m[38;2;242;214;176m▄[48;2;222;193;158m[38;2;243;215;178m▄[48;2;212;186;150m[38;2;243;215;179m▄[48;2;223;192;156m[38;2;243;215;178m▄[48;2;239;205;168m[38;2;244;216;177m▄[48;2;243;217;176m[38;2;244;216;177m▄[48;2;245;217;178m[38;2;245;217;178m▄[48;2;246;218;179m[38;2;245;217;178m▄[48;2;246;218;179m[38;2;244;216;177m▄[48;2;244;217;178m[38;2;243;215;176m▄[48;2;236;208;169m[38;2;237;211;173m▄[48;2;241;214;181m[38;2;243;215;179m▄[48;2;242;220;197m[38;2;222;189;156m▄[48;2;162;150;138m[38;2;215;189;160m▄[48;2;142;137;124m[38;2;225;205;173m▄[48;2;230;224;212m[38;2;225;200;168m▄[48;2;236;214;187m[38;2;207;183;151m▄[48;2;132;109;89m[38;2;147;121;96m▄[48;2;136;115;88m[38;2;235;209;176m▄[48;2;234;210;172m[38;2;241;213;174m▄[48;2;240;213;175m[38;2;240;214;174m▄[48;2;238;207;167m[38;2;239;211;171m▄[48;2;179;139;99m[38;2;200;165;127m▄[48;2;171;127;86m[38;2;193;155;116m▄[48;2;178;140;101m[38;2;231;201;161m▄[48;2;227;199;161m[38;2;238;212;172m▄[48;2;235;211;173m[38;2;234;212;173m▄[48;2;124;114;98m[38;2;112;104;90m▄[48;2;61;65;72m[38;2;58;63;72m▄[48;2;58;62;69m[38;2;51;59;68m▄[m
[48;2;45;52;62m[38;2;44;51;60m▄[48;2;45;52;62m[38;2;44;51;60m▄[48;2;47;52;62m[38;2;44;51;60m▄[48;2;47;53;58m[38;2;45;52;54m▄[48;2;60;63;61m[38;2;78;79;70m▄[48;2;52;55;56m[38;2;54;55;49m▄[48;2;48;54;58m[38;2;46;54;62m▄[48;2;79;76;59m[38;2;45;55;63m▄[48;2;82;73;55m[38;2;48;56;64m▄[48;2;54;57;55m[38;2;50;56;65m▄[48;2;50;59;66m[38;2;52;56;61m▄[48;2;88;70;53m[38;2;99;75;53m▄[48;2;126;90;52m[38;2;121;87;50m▄[48;2;134;93;50m[38;2;133;93;49m▄[48;2;132;92;53m[38;2;134;93;53m▄[48;2;83;57;30m[38;2;91;63;35m▄[48;2;127;95;64m[38;2;126;92;62m▄[48;2;228;200;161m[38;2;225;195;158m▄[48;2;242;214;176m[38;2;241;213;176m▄[48;2;243;215;177m[38;2;242;214;177m▄[48;2;243;215;177m[38;2;243;215;176m▄[48;2;242;215;177m[38;2;244;216;176m▄[48;2;242;216;177m[38;2;244;216;178m▄[48;2;243;215;176m[38;2;243;215;179m▄[48;2;243;215;176m[38;2;242;214;176m▄[48;2;244;216;177m[38;2;243;215;176m▄[48;2;243;215;177m[38;2;243;215;177m▄[48;2;243;214;176m[38;2;242;214;176m▄[48;2;241;215;178m[38;2;242;214;175m▄[48;2;243;214;177m[38;2;242;214;174m▄[48;2;236;206;170m[38;2;243;214;177m▄[48;2;206;179;147m[38;2;240;210;176m▄[48;2;233;205;172m[38;2;222;194;163m▄[48;2;238;213;178m[38;2;208;183;152m▄[48;2;240;214;178m[38;2;210;184;151m▄[48;2;241;213;177m[38;2;240;212;178m▄[48;2;241;212;178m[38;2;240;211;175m▄[48;2;241;211;174m[38;2;240;212;174m▄[48;2;238;213;172m[38;2;239;211;173m▄[48;2;239;213;174m[38;2;240;211;174m▄[48;2;237;206;170m[38;2;239;211;173m▄[48;2;235;207;166m[38;2;237;210;175m▄[48;2;235;211;170m[38;2;236;209;174m▄[48;2;237;210;170m[38;2;235;209;174m▄[48;2;233;208;173m[38;2;219;197;165m▄[48;2;95;88;79m[38;2;75;71;64m▄[48;2;53;61;69m[38;2;52;59;70m▄[48;2;49;57;62m[38;2;50;54;63m▄[m
[48;2;30;37;44m[38;2;27;35;39m▄[48;2;30;37;44m[38;2;26;33;37m▄[48;2;32;39;45m[38;2;26;34;38m▄[48;2;32;41;47m[38;2;32;40;42m▄[48;2;35;42;47m[38;2;40;47;53m▄[48;2;37;43;47m[38;2;46;49;62m▄[48;2;37;44;51m[38;2;45;45;54m▄[48;2;43;46;52m[38;2;43;40;41m▄[48;2;47;46;49m[38;2;48;38;35m▄[48;2;51;46;45m[38;2;52;40;28m▄[48;2;74;60;47m[38;2;104;75;47m▄[48;2;121;88;56m[38;2;132;91;51m▄[48;2;118;83;47m[38;2;117;81;48m▄[48;2;132;93;52m[38;2;131;92;54m▄[48;2;135;93;52m[38;2;135;92;50m▄[48;2;109;77;45m[38;2;123;86;52m▄[48;2;122;89;58m[38;2;122;89;57m▄[48;2;216;187;151m[38;2;209;181;144m▄[48;2;241;213;176m[38;2;240;212;175m▄[48;2;242;214;177m[38;2;242;214;177m▄[48;2;242;214;175m[38;2;242;214;175m▄[48;2;243;215;175m[38;2;243;215;175m▄[48;2;243;215;178m[38;2;241;213;176m▄[48;2;233;204;170m[38;2;226;198;163m▄[48;2;241;213;177m[38;2;226;197;163m▄[48;2;242;214;177m[38;2;241;212;178m▄[48;2;242;214;177m[38;2;241;213;179m▄[48;2;242;214;175m[38;2;236;209;171m▄[48;2;242;214;175m[38;2;240;212;173m▄[48;2;242;214;174m[38;2;240;212;173m▄[48;2;242;213;175m[38;2;241;212;174m▄[48;2;242;212;176m[38;2;240;211;173m▄[48;2;238;211;176m[38;2;238;211;175m▄[48;2;235;210;178m[38;2;220;196;162m▄[48;2;99;80;57m[38;2;81;62;42m▄[48;2;146;120;91m[38;2;110;83;56m▄[48;2;209;181;151m[38;2;83;60;39m▄[48;2;224;196;168m[38;2;76;60;42m▄[48;2;222;197;171m[38;2;68;59;46m▄[48;2;219;196;167m[38;2;92;85;76m▄[48;2;233;207;173m[38;2;148;134;116m▄[48;2;235;210;175m[38;2;209;186;155m▄[48;2;236;208;169m[38;2;229;205;173m▄[48;2;235;208;171m[38;2;170;156;133m▄[48;2;133;122;108m[38;2;65;66;68m▄[48;2;61;64;64m[38;2;52;60;67m▄[48;2;50;58;67m[38;2;48;55;63m▄[48;2;48;53;62m[38;2;48;52;63m▄[m
[48;2;44;49;55m[38;2;28;33;39m▄[48;2;29;34;40m[38;2;27;32;38m▄[48;2;33;38;44m[38;2;29;34;40m▄[48;2;46;52;58m[38;2;46;51;59m▄[48;2;40;47;55m[38;2;43;50;58m▄[48;2;45;52;61m[38;2;43;50;58m▄[48;2;45;52;60m[38;2;45;53;61m▄[48;2;47;53;58m[38;2;46;52;62m▄[48;2;40;40;43m[38;2;46;47;57m▄[48;2;40;36;28m[38;2;36;35;36m▄[48;2;103;75;45m[38;2;97;71;49m▄[48;2;131;89;47m[38;2;131;86;47m▄[48;2;115;82;45m[38;2;120;82;47m▄[48;2;130;91;51m[38;2;126;86;49m▄[48;2;133;91;51m[38;2;132;90;52m▄[48;2;129;92;54m[38;2;130;92;55m▄[48;2;123;90;53m[38;2;130;95;57m▄[48;2;201;172;137m[38;2;190;162;127m▄[48;2;239;211;173m[38;2;238;210;172m▄[48;2;238;212;175m[38;2;239;210;174m▄[48;2;240;212;176m[38;2;239;210;175m▄[48;2;241;212;176m[38;2;240;212;175m▄[48;2;241;213;176m[38;2;240;212;175m▄[48;2;241;213;177m[38;2;240;212;175m▄[48;2;225;199;164m[38;2;237;211;175m▄[48;2;211;185;150m[38;2;238;212;176m▄[48;2;211;186;150m[38;2;239;212;176m▄[48;2;219;192;154m[38;2;239;211;174m▄[48;2;239;211;173m[38;2;240;212;175m▄[48;2;241;213;175m[38;2;240;212;175m▄[48;2;241;213;176m[38;2;238;211;174m▄[48;2;238;211;173m[38;2;237;210;171m▄[48;2;238;211;171m[38;2;236;210;174m▄[48;2;190;166;139m[38;2;148;126;101m▄[48;2;78;56;35m[38;2;85;59;36m▄[48;2;117;87;52m[38;2;113;83;51m▄[48;2;66;48;29m[38;2;59;42;23m▄[48;2;62;46;35m[38;2;61;42;27m▄[48;2;54;45;36m[38;2;75;58;42m▄[48;2;59;63;65m[38;2;40;42;42m▄[48;2;124;118;113m[38;2;70;69;67m▄[48;2;122;113;102m[38;2;106;106;106m▄[48;2;93;90;82m[38;2;58;61;64m▄[48;2;63;65;62m[38;2;51;59;65m▄[48;2;53;59;66m[38;2;48;55;63m▄[48;2;48;56;63m[38;2;46;53;61m▄[48;2;47;54;62m[38;2;45;52;60m▄[48;2;45;52;60m[38;2;45;52;60m▄[m
[48;2;28;33;39m[38;2;41;47;53m▄[48;2;27;32;38m[38;2;28;34;40m▄[48;2;28;33;39m[38;2;27;33;39m▄[48;2;44;49;58m[38;2;42;49;57m▄[48;2;44;51;59m[38;2;44;51;59m▄[48;2;42;49;57m[38;2;40;47;55m▄[48;2;46;53;60m[38;2;45;52;60m▄[48;2;46;52;62m[38;2;46;52;60m▄[48;2;48;52;63m[38;2;47;52;59m▄[48;2;37;40;44m[38;2;42;49;52m▄[48;2;81;64;47m[38;2;56;50;37m▄[48;2;128;86;49m[38;2;121;87;54m▄[48;2;124;87;51m[38;2;119;85;52m▄[48;2;119;81;47m[38;2;106;77;53m▄[48;2;131;89;54m[38;2;130;88;54m▄[48;2;132;91;54m[38;2;132;91;53m▄[48;2;134;95;56m[38;2;132;92;53m▄[48;2;147;111;78m[38;2;152;110;74m▄[48;2;213;181;144m[38;2;168;128;89m▄[48;2;238;210;174m[38;2;196;162;126m▄[48;2;238;211;176m[38;2;237;208;176m▄[48;2;240;212;175m[38;2;236;209;176m▄[48;2;239;211;174m[38;2;236;209;174m▄[48;2;239;211;173m[38;2;236;209;175m▄[48;2;240;211;173m[38;2;238;209;174m▄[48;2;240;211;174m[38;2;239;209;174m▄[48;2;240;211;173m[38;2;238;209;173m▄[48;2;239;210;173m[38;2;237;208;171m▄[48;2;239;211;174m[38;2;236;208;172m▄[48;2;238;210;173m[38;2;236;209;173m▄[48;2;237;209;172m[38;2;228;203;168m▄[48;2;236;209;172m[38;2;178;156;127m▄[48;2;205;179;152m[38;2;89;68;48m▄[48;2;83;64;43m[38;2;70;51;29m▄[48;2;103;71;43m[38;2;119;85;52m▄[48;2;99;68;41m[38;2;79;54;31m▄[48;2;59;42;26m[38;2;60;43;25m▄[48;2;73;51;25m[38;2;92;63;36m▄[48;2;107;82;56m[38;2;116;87;60m▄[48;2;44;42;38m[38;2;86;80;74m▄[48;2;40;41;45m[38;2;49;53;59m▄[48;2;50;54;61m[38;2;52;55;65m▄[48;2;49;54;63m[38;2;47;53;63m▄[48;2;46;54;63m[38;2;47;54;60m▄[48;2;46;53;62m[38;2;48;53;64m▄[48;2;46;53;62m[38;2;46;54;60m▄[48;2;45;52;60m[38;2;45;53;59m▄[48;2;45;52;60m[38;2;45;52;61m▄[m
[48;2;44;51;58m[38;2;44;51;60m▄[48;2;39;46;53m[38;2;44;51;60m▄[48;2;27;34;42m[38;2;36;43;52m▄[48;2;43;50;58m[38;2;43;50;58m▄[48;2;44;51;59m[38;2;44;51;59m▄[48;2;40;47;55m[38;2;39;46;54m▄[48;2;45;52;59m[38;2;44;51;60m▄[48;2;46;52;62m[38;2;45;51;63m▄[48;2;46;53;60m[38;2;45;52;62m▄[48;2;42;50;55m[38;2;41;48;55m▄[48;2;46;47;46m[38;2;49;54;62m▄[48;2;99;75;53m[38;2;65;55;51m▄[48;2;115;88;61m[38;2;85;73;58m▄[48;2;124;107;89m[38;2;131;124;110m▄[48;2;121;89;56m[38;2;109;88;63m▄[48;2;130;88;51m[38;2;129;89;52m▄[48;2;131;90;53m[38;2;128;88;53m▄[48;2;155;111;73m[38;2;155;114;79m▄[48;2;173;126;86m[38;2;171;124;84m▄[48;2;171;128;89m[38;2;174;126;84m▄[48;2;182;147;112m[38;2;172;128;87m▄[48;2;226;195;160m[38;2;162;125;89m▄[48;2;237;208;171m[38;2;176;151;122m▄[48;2;236;208;171m[38;2;210;190;165m▄[48;2;237;207;169m[38;2;216;191;161m▄[48;2;235;208;172m[38;2;183;162;135m▄[48;2;233;209;175m[38;2;122;105;81m▄[48;2;225;201;171m[38;2;78;61;43m▄[48;2;197;175;146m[38;2;66;49;33m▄[48;2;147;127;99m[38;2;62;48;32m▄[48;2;96;77;53m[38;2;59;45;30m▄[48;2;69;51;34m[38;2;59;43;31m▄[48;2;65;47;32m[38;2;63;41;25m▄[48;2;80;56;32m[38;2;104;73;44m▄[48;2;119;87;52m[38;2;110;83;53m▄[48;2;63;45;23m[38;2;74;59;41m▄[48;2;64;45;26m[38;2;76;55;34m▄[48;2;110;79;51m[38;2;113;87;61m▄[48;2;126;100;74m[38;2;150;130;108m▄[48;2;138;127;114m[38;2;149;139;124m▄[48;2;65;66;61m[38;2;110;105;98m▄[48;2;49;57;58m[38;2;48;48;53m▄[48;2;44;55;62m[38;2;45;47;44m▄[48;2;46;54;63m[38;2;83;81;63m▄[48;2;49;54;61m[38;2;62;65;58m▄[48;2;47;52;63m[38;2;47;50;60m▄[48;2;46;52;62m[38;2;47;51;62m▄[48;2;46;52;60m[38;2;46;51;58m▄[m
[48;2;43;50;60m[38;2;43;50;60m▄[48;2;44;51;61m[38;2;44;51;61m▄[48;2;43;50;60m[38;2;44;51;61m▄[48;2;43;50;59m[38;2;43;50;60m▄[48;2;44;51;59m[38;2;44;51;59m▄[48;2;39;46;54m[38;2;39;46;54m▄[48;2;44;51;60m[38;2;44;51;59m▄[48;2;43;49;61m[38;2;44;50;61m▄[48;2;44;50;61m[38;2;42;49;59m▄[48;2;41;47;57m[38;2;42;49;58m▄[48;2;46;54;63m[38;2;48;53;61m▄[48;2;52;53;57m[38;2;47;55;64m▄[48;2;52;50;47m[38;2;48;54;58m▄[48;2;123;120;114m[38;2;107;107;104m▄[48;2;114;96;78m[38;2;127;119;110m▄[48;2;126;90;54m[38;2;117;89;62m▄[48;2;121;88;54m[38;2;115;87;59m▄[48;2;135;105;79m[38;2;136;126;119m▄[48;2;162;122;88m[38;2;133;110;93m▄[48;2;171;125;84m[38;2;154;122;85m▄[48;2;172;125;86m[38;2;145;116;88m▄[48;2;150;112;83m[38;2;115;101;84m▄[48;2;97;82;68m[38;2;117;116;110m▄[48;2;59;56;52m[38;2;44;45;44m▄[48;2;65;53;43m[38;2;36;38;35m▄[48;2;62;50;39m[38;2;37;35;31m▄[48;2;60;47;34m[38;2;43;36;31m▄[48;2;61;43;30m[38;2;44;36;30m▄[48;2;54;38;26m[38;2;37;32;22m▄[48;2;52;38;28m[38;2;41;33;30m▄[48;2;52;38;23m[38;2;47;37;24m▄[48;2;54;40;21m[38;2;57;41;22m▄[48;2;73;50;28m[38;2;107;75;46m▄[48;2;122;86;53m[38;2;119;83;51m▄[48;2;118;97;72m[38;2;134;118;96m▄[48;2;77;64;47m[38;2;80;66;49m▄[48;2;94;71;50m[38;2;109;95;84m▄[48;2;134;112;91m[38;2;82;75;69m▄[48;2;130;117;105m[38;2;54;55;53m▄[48;2;74;71;66m[38;2;41;45;48m▄[48;2;48;52;53m[38;2;44;50;55m▄[48;2;47;56;60m[38;2;46;52;61m▄[48;2;45;53;58m[38;2;45;51;60m▄[48;2;45;48;51m[38;2;45;51;60m▄[48;2;43;45;46m[38;2;45;52;60m▄[48;2;56;60;56m[38;2;43;50;55m▄[48;2;48;52;52m[38;2;43;51;55m▄[48;2;46;49;59m[38;2;44;51;60m▄[m
[48;2;43;50;60m[38;2;42;49;59m▄[48;2;43;50;60m[38;2;43;50;60m▄[48;2;44;51;61m[38;2;44;51;61m▄[48;2;44;51;60m[38;2;44;51;60m▄[48;2;43;50;58m[38;2;43;50;58m▄[48;2;41;48;56m[38;2;43;50;58m▄[48;2;43;50;58m[38;2;42;49;58m▄[48;2;44;51;61m[38;2;43;50;60m▄[48;2;40;47;57m[38;2;39;46;56m▄[48;2;43;50;60m[38;2;44;51;61m▄[48;2;47;52;62m[38;2;46;51;62m▄[48;2;47;55;65m[38;2;47;54;67m▄[48;2;54;59;65m[38;2;54;59;67m▄[48;2;99;98;98m[38;2;117;115;116m▄[48;2;135;129;127m[38;2;132;129;129m▄[48;2;114;94;76m[38;2;128;117;110m▄[48;2;110;90;67m[38;2;100;89;79m▄[48;2;129;123;119m[38;2;95;94;94m▄[48;2;106;100;96m[38;2;73;76;83m▄[48;2;118;109;95m[38;2;90;94;93m▄[48;2;134;127;118m[38;2;106;105;107m▄[48;2;134;130;123m[38;2;133;130;126m▄[48;2;118;118;116m[38;2;115;112;110m▄[48;2;42;42;44m[38;2;38;40;44m▄[48;2;31;33;35m[38;2;29;33;37m▄[48;2;28;32;35m[38;2;28;32;37m▄[48;2;33;37;43m[38;2;41;44;51m▄[48;2;45;47;53m[38;2;45;51;61m▄[48;2;37;42;42m[38;2;40;49;52m▄[48;2;47;47;51m[38;2;50;50;56m▄[48;2;47;38;30m[38;2;61;48;35m▄[48;2;83;55;33m[38;2;113;80;51m▄[48;2;125;85;48m[38;2;105;77;51m▄[48;2;95;76;53m[38;2;56;53;48m▄[48;2;128;118;104m[38;2;50;54;52m▄[48;2;70;64;56m[38;2;49;53;55m▄[48;2;59;57;58m[38;2;47;53;61m▄[48;2;50;53;58m[38;2;43;47;57m▄[48;2;42;46;53m[38;2;32;36;45m▄[48;2;32;35;46m[38;2;37;43;52m▄[48;2;46;49;59m[38;2;44;52;60m▄[48;2;45;51;59m[38;2;44;51;59m▄[48;2;43;50;58m[38;2;40;47;55m▄[48;2;44;51;59m[38;2;44;51;59m▄[48;2;45;52;60m[38;2;45;52;60m▄[48;2;45;52;60m[38;2;45;51;63m▄[48;2;43;50;59m[38;2;44;50;62m▄[48;2;44;51;60m[38;2;43;50;59m▄[m
[48;2;42;49;59m[38;2;42;49;58m▄[48;2;42;49;59m[38;2;42;49;58m▄[48;2;43;50;60m[38;2;43;50;59m▄[48;2;43;50;60m[38;2;43;50;59m▄[48;2;43;50;58m[38;2;42;49;57m▄[48;2;43;50;58m[38;2;43;50;58m▄[48;2;42;49;58m[38;2;43;50;58m▄[48;2;43;50;59m[38;2;42;49;57m▄[48;2;38;45;53m[38;2;43;50;58m▄[48;2;41;48;57m[38;2;42;49;57m▄[48;2;46;52;61m[38;2;41;48;57m▄[48;2;47;54;64m[38;2;44;51;59m▄[48;2;53;59;66m[38;2;53;60;65m▄[48;2;131;134;135m[38;2;123;127;129m▄[48;2;153;150;145m[38;2;195;192;188m▄[48;2;135;129;122m[38;2;132;129;124m▄[48;2;126;124;120m[38;2;98;100;100m▄[48;2;60;66;72m[38;2;56;67;72m▄[48;2;56;66;76m[38;2;53;67;75m▄[48;2;54;63;70m[38;2;50;63;71m▄[48;2;89;89;91m[38;2;77;81;83m▄[48;2;133;128;124m[38;2;124;122;119m▄[48;2;103;102;99m[38;2;83;83;81m▄[48;2;33;38;41m[38;2;31;38;40m▄[48;2;29;34;38m[38;2;28;34;38m▄[48;2;30;34;41m[38;2;37;42;49m▄[48;2;47;49;59m[38;2;46;50;60m▄[48;2;45;51;62m[38;2;45;51;61m▄[48;2;43;52;62m[38;2;43;52;62m▄[48;2;50;50;55m[38;2;49;49;56m▄[48;2;91;72;54m[38;2;70;61;56m▄[48;2;107;81;52m[38;2;61;52;45m▄[48;2;59;54;48m[38;2;49;51;58m▄[48;2;46;50;56m[38;2;47;51;62m▄[48;2;45;52;59m[38;2;46;52;60m▄[48;2;46;54;62m[38;2;44;51;59m▄[48;2;44;51;59m[38;2;39;46;54m▄[48;2;34;40;49m[38;2;41;48;56m▄[48;2;42;48;56m[38;2;42;49;57m▄[48;2;39;47;54m[38;2;41;48;56m▄[48;2;43;50;58m[38;2;43;50;58m▄[48;2;44;50;58m[38;2;44;51;59m▄[48;2;37;44;52m[38;2;39;46;54m▄[48;2;43;50;58m[38;2;34;41;49m▄[48;2;44;51;60m[38;2;43;50;60m▄[48;2;44;51;62m[38;2;43;50;59m▄[48;2;44;50;61m[38;2;43;50;60m▄[48;2;43;50;59m[38;2;43;50;59m▄[m
[48;2;41;48;56m[38;2;39;46;52m▄[48;2;41;48;56m[38;2;40;47;53m▄[48;2;41;48;56m[38;2;40;47;53m▄[48;2;41;48;56m[38;2;40;47;54m▄[48;2;41;48;56m[38;2;40;47;55m▄[48;2;41;48;56m[38;2;40;47;55m▄[48;2;41;48;56m[38;2;40;47;55m▄[48;2;41;48;56m[38;2;40;47;55m▄[48;2;42;49;57m[38;2;41;48;56m▄[48;2;42;49;57m[38;2;41;48;56m▄[48;2;43;50;59m[38;2;40;47;56m▄[48;2;42;49;57m[38;2;39;46;53m▄[48;2;47;54;59m[38;2;45;53;57m▄[48;2;88;92;94m[38;2;86;91;92m▄[48;2;215;213;209m[38;2;185;185;181m▄[48;2;136;137;135m[38;2;117;126;127m▄[48;2;62;71;76m[38;2;63;76;81m▄[48;2;49;59;65m[38;2;55;63;69m▄[48;2;45;59;67m[38;2;43;54;63m▄[48;2;48;61;68m[38;2;46;56;64m▄[48;2;59;66;68m[38;2;52;60;64m▄[48;2;107;108;106m[38;2;91;95;94m▄[48;2;63;63;63m[38;2;42;43;46m▄[48;2;31;35;39m[38;2;32;36;41m▄[48;2;35;40;44m[38;2;42;48;52m▄[48;2;41;45;52m[38;2;39;44;51m▄[48;2;45;49;59m[38;2;42;47;56m▄[48;2;45;49;59m[38;2;42;47;57m▄[48;2;44;50;60m[38;2;43;48;56m▄[48;2;45;49;58m[38;2;41;48;57m▄[48;2;45;47;55m[38;2;39;46;55m▄[48;2;42;46;52m[38;2;42;47;54m▄[48;2;43;49;59m[38;2;43;48;55m▄[48;2;44;50;60m[38;2;41;49;57m▄[48;2;44;50;59m[38;2;41;48;56m▄[48;2;41;48;56m[38;2;40;47;55m▄[48;2;41;48;56m[38;2;42;49;57m▄[48;2;43;50;58m[38;2;41;48;56m▄[48;2;39;46;54m[38;2;38;45;53m▄[48;2;42;49;57m[38;2;42;49;57m▄[48;2;43;50;58m[38;2;42;49;57m▄[48;2;42;49;57m[38;2;41;48;57m▄[48;2;41;48;56m[38;2;41;48;57m▄[48;2;26;33;41m[38;2;30;37;45m▄[48;2;32;39;47m[38;2;24;31;37m▄[48;2;41;48;56m[38;2;27;33;40m▄[48;2;42;49;57m[38;2;33;40;45m▄[48;2;42;49;57m[38;2;38;44;49m▄[m
[?25h"
	exit 0
}

export LC_ALL=POSIX
export VERSION="@VER@"
export TOPDIR="$PWD"

CONFIG="/etc/ne/config"
ROOTDIR=''
OPTIONS=('emptydirs' 'strip' 'makeflags' 'locales' 'docs' 'ccache')
REPOS=('/var/cache/ports/packages')
DEPENDS="yes"
CONFLICTS="yes"
CLEAN="yes"
DOWNLOAD="yes"
UNPACK="yes"
BUILD="yes"
PACKAGE="yes"
USEBOOTSTRAP="no"
FORCE="no"
NEEDED="no"

while getopts IBERPUfndeCDubpWc:r:vhy options; do
	case $options in
		I)
			mode=install_package
			;;
		B)
			mode=build_package
			;;
		E)
			mode=emerge_package
			;;
		R)
			purge="no"
			mode=remove_package
			;;
		P)
			purge="yes"
			mode=remove_package
			;;
		U)
			mode=system_upgrade
			;;
		c)
			CONFIG="$OPTARG"
			;;
		r)
			ROOTDIR="$OPTARG"
			;;
		f)
			FORCE="yes"
			;;
		n)
			NEEDED="yes"
			;;
		d)
			DEPENDS="no"
			;;
		e)
			CONFLICTS="no"
			;;
		C)
			CLEAN="no"
			;;
		D)
			DOWNLOAD="no"
			;;
		u)
			UNPACK="no"
			;;
		b)
			BUILD="no"
			;;
		p)
			PACKAGE="no"
			;;
		W)
			USEBOOTSTRAP="yes"
			;;
		y)
			yui
			;;
		:)
			die "Option '-${OPTARG}' needs an argument"
			;;
		\?)
			die "Option '-${OPTARG}' is illegal"
			;;
	esac
done
if [ "$#" -eq 0 ]; then
	die "Specify options. To list available options use: ne -h"
fi
shift $((OPTIND - 1))

check_root
source_config

if [ "$mode" = "install_package" ] || [ "$mode" = "emerge_package" ] || [ "$mode" = "remove_package" ]; then
	if [ -n "$ROOTDIR" ]; then
		ROOTDIR="$(realpath $ROOTDIR)"
		ROOTDIR="${ROOTDIR%/}"
	fi

	for mypackages in "$@"; do
		$mode $mypackages
	done
else
	$mode
fi

exit 0

